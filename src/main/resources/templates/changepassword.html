<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>Dashboard - NiceAdmin Bootstrap Template</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect" />
    <link
            href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
            rel="stylesheet"
    />

    <link   href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Favicons -->
    <link th:href="@{/images/favicon.png}" rel="icon">
    <link th:href="@{/images/apple-touch-icon.png}" rel="apple-touch-icon">

    <link
            th:href="@{/vendor/bootstrap-icons/bootstrap-icons.css}"
            rel="stylesheet"
    />
    <link href="/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link href="/vendor/remixicon/remixicon.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="/css/style.css" rel="stylesheet" />
</head>

<body>
<!-- ======= Header ======= -->
<div th:replace="fragments/header :: header"></div>
<div th:replace="fragments/sidebar :: #sidebar"></div>

<main id="main" class="main">
    <div class="pagetitle">
        <h1>Dashboard</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
                <li class="breadcrumb-item active">ChangePassword</li>
            </ol>
        </nav>
    </div>
    <!-- End Page Title -->
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center">



                <div class="card mb-3">

                    <div class="card-body">

                        <div class="pt-4 pb-2">
                            <h5 class="card-title text-center pb-0 fs-4">Change Password</h5>

                        </div>


                        <form id="passwordForm" class="row g-3 needs-validation" novalidate>
                            <div class="col-12">
                                <label for="yourPassword" class="form-label">Enter Your Old Password</label>
                                <input type="password" name="yourPassword" class="form-control" id="yourPassword" required
                                       onblur="validateInput(this, 'Please enter your old password!', 'yourPasswordError');" onfocus="clearError('yourPasswordError');">
                                <div class="invalid-feedback" id="yourPasswordError"></div>
                            </div>
                            <div class="col-12">
                                <label for="newPassword" class="form-label">Enter Your New Password</label>
                                <input type="password" name="newPassword" class="form-control" id="newPassword" required
                                       onblur="validatePassword(this.value, 'newPasswordError');" onfocus="clearError('newPasswordError');">
                                <div class="invalid-feedback" id="newPasswordError"></div>
                            </div>
                            <div class="col-12">
                                <label for="retypePassword" class="form-label">Enter Retype Password</label>
                                <input type="password" name="retypePassword" class="form-control" id="retypePassword" required
                                       onblur="validateRetypePassword(this.value, 'newPassword', 'retypePasswordError');" onfocus="clearError('retypePasswordError');">
                                <div class="invalid-feedback" id="retypePasswordError"></div>
                            </div>
                            <div>
                                <button type="button" class="btn btn-primary" id="submitButton">Save</button>
                                <button type="button" class="btn btn-primary" id="cancelButton">Cancel</button>
                            </div>
                            <div id="validationMessage" class="text-danger"></div>
                        </form>

                        <script>
                            function validateInput(input, errorMessage, errorId) {
                                var errorElement = document.getElementById(errorId);
                                var password = input.value.trim();

                                // Check if password contains at least one special character, one lowercase letter, and is longer than 8 characters
                                var specialCharacterRegex = /[!@#$%^&*(),.?":{}|<>]/;
                                var lowercaseRegex = /[a-z]/;

                                if (!specialCharacterRegex.test(password) || !lowercaseRegex.test(password) || password.length < 8) {
                                    errorElement.textContent = errorMessage;
                                    errorElement.style.display = "block";
                                    return false;
                                }
                                return true;
                            }

                            function validatePassword(password, errorId) {
                                var passwordError = document.getElementById(errorId);
                                if (password.trim().length < 8) {
                                    passwordError.textContent = "Password must be at least 8 characters long!";
                                    passwordError.style.display = "block";
                                    return false;
                                }
                                // Check if password contains at least one of the specified characters (a, A, @, 1, 2, or 3)
                                var specialCharacterRegex = /[aA@123]/;
                                if (!specialCharacterRegex.test(password)) {
                                    passwordError.textContent = "Password must contain at least one of the characters (a, A, @, 1, 2, or 3)!";
                                    passwordError.style.display = "block";
                                    return false;
                                }
                                return true;
                            }

                            function validateRetypePassword(retypePassword, originalPasswordId, errorId) {
                                var errorElement = document.getElementById(errorId);
                                var originalPassword = document.getElementById(originalPasswordId).value;
                                if (retypePassword.trim() === "") {
                                    errorElement.textContent = "Please re-enter your password!";
                                    errorElement.style.display = "block";
                                    return false;
                                }
                                if (retypePassword !== originalPassword) {
                                    errorElement.textContent = "Passwords do not match!";
                                    errorElement.style.display = "block";
                                    return false;
                                }
                                return true;
                            }

                            function clearError(errorId) {
                                var errorElement = document.getElementById(errorId);
                                errorElement.style.display = "none";
                            }

                            document.getElementById("submitButton").addEventListener("click", function() {
                                var yourPassword = document.getElementById("yourPassword").value;
                                var newPassword = document.getElementById("newPassword").value;
                                var retypePassword = document.getElementById("retypePassword").value;

                                var isYourPasswordValid = validateInput(document.getElementById("yourPassword"), "Old password must contain at least one special character, one lowercase letter, and be at least 8 characters long!", "yourPasswordError");
                                var isNewPasswordValid = validatePassword(newPassword, "newPasswordError");
                                var isRetypePasswordValid = validateRetypePassword(retypePassword, "newPassword", "retypePasswordError");

                                if (isYourPasswordValid && isNewPasswordValid && isRetypePasswordValid) {
                                    // Form is valid, you can proceed with form submission or other actions
                                    document.getElementById("validationMessage").textContent = "Form submitted successfully!";
                                } else {
                                    // Form validation failed
                                    document.getElementById("validationMessage").textContent = "Form validation failed. Please check your inputs.";
                                }
                            });

                            document.getElementById("cancelButton").addEventListener("click", function() {
                                // Custom logic for cancel button click
                                document.getElementById("validationMessage").textContent = "Form submission canceled.";
                            });
                        </script>





                    </div>
                </div>



            </div>
        </div>
    </div>


    <!-- End #main -->

    <!-- Vendor JS Files -->
    <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js">

        <!-- Template Main JS File -->
        <script src="/js/main.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.min.js"></script>





</body>
</html>
