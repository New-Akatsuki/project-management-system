<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />

  <title>Dashboard - NiceAdmin Bootstrap Template</title>
  <meta content="" name="description" />
  <meta content="" name="keywords" />

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect" />
  <link
          href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
          rel="stylesheet"
  />

  <link   href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Favicons -->
  <link th:href="@{/images/favicon.png}" rel="icon">
  <link th:href="@{/images/apple-touch-icon.png}" rel="apple-touch-icon">

  <link
          th:href="@{/vendor/bootstrap-icons/bootstrap-icons.css}"
          rel="stylesheet"
  />
  <link href="/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
  <link href="/vendor/remixicon/remixicon.css" rel="stylesheet" />

  <!-- Template Main CSS File -->
  <link href="/css/style.css" rel="stylesheet" />
</head>

<body>
<!-- ======= Header ======= -->
<div th:replace="fragments/header :: header"></div>
<div th:replace="fragments/sidebar :: #sidebar"></div>

<main id="main" class="main">
  <div class="pagetitle">
    <h1>Dashboard</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
        <li class="breadcrumb-item active">Default Password</li>
      </ol>
    </nav>
  </div>
  <!-- End Page Title -->
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center">



        <div class="card mb-3">

          <div class="card-body">

            <div class="pt-4 pb-2">
              <h5 class="card-title text-center pb-0 fs-4">Change Default Password</h5>

            </div>

            <form class="row g-3 needs-validation" novalidate>
              <div class="col-12">
                <label for="newPassword" class="form-label">New Password</label>
                <input type="password" name="password" class="form-control" id="newPassword" required
                       onblur="validatePassword(this.value, 'passwordError');" onfocus="clearError('passwordError');">
                <div class="invalid-feedback" id="passwordError"></div>
              </div>
              <div class="col-12">
                <label for="yourPassword" class="form-label">Retype Password</label>
                <input type="password" name="confirmPassword" class="form-control" id="yourPassword" required
                       onblur="validateConfirmPassword(this.value, 'confirmPasswordError');" onfocus="clearError('confirmPasswordError');">
                <div class="invalid-feedback" id="confirmPasswordError"></div>
              </div>


              <div>
                <button type="button" class="btn btn-primary" onclick="validateForm()">Save</button>
                <button type="button" class="btn btn-primary">Cancel</button>
              </div>
              <div>
                <p>*Note: You must change the default password to activate your account</p>
              </div>
            </form>

            <script>
              function validatePassword(password, errorId) {
                var passwordError = document.getElementById(errorId);

                if (password.trim().length < 8 ||
                        !/[A-Z]/.test(password) ||
                        !/[a-z]/.test(password) ||
                        !/[0-9]/.test(password) ||
                        !/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
                  passwordError.textContent = "Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one special character, and one number!";
                  passwordError.style.display = "block";
                  return false;
                }

                passwordError.style.display = "none";
                return true;
              }

              function validateConfirmPassword(confirmPassword, errorId) {
                var confirmPasswordError = document.getElementById(errorId);

                if (confirmPassword.trim() === "") {
                  confirmPasswordError.textContent = "Please re-enter your password!";
                  confirmPasswordError.style.display = "block";
                  return false;
                }

                var newPassword = document.getElementById("newPassword").value;
                if (confirmPassword !== newPassword) {
                  confirmPasswordError.textContent = "Passwords do not match!";
                  confirmPasswordError.style.display = "block";
                  return false;
                }

                confirmPasswordError.style.display = "none";
                return true;
              }

              function clearError(errorId) {
                var errorElement = document.getElementById(errorId);
                errorElement.textContent = "";
                errorElement.style.display = "none";
              }

              function validateForm() {
                var newPassword = document.getElementById("newPassword").value;
                var confirmPassword = document.getElementById("yourPassword").value;

                var isPasswordValid = validatePassword(newPassword, 'passwordError');
                var isConfirmPasswordValid = validateConfirmPassword(confirmPassword, 'confirmPasswordError');

                if (isPasswordValid && isConfirmPasswordValid) {
                  alert("Form submitted successfully!");
                } else {
                  alert("Form validation failed. Please check your inputs.");
                }
              }
            </script>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- End #main -->

  <!-- Vendor JS Files -->
  <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- Template Main JS File -->
  <script src="/js/main.js"></script>


</body>
</html>
